<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=1040">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta name="keywords" content="d3,d3.js,visualization,dom,javascript">
<meta itemprop="description" name="description"
  content="D3 is a JavaScript library for visualizing data with HTML, SVG, and CSS.">
<link rel="image_src" href="https://d3js.org/preview.png">
<link rel="apple-touch-icon" href="https://d3js.org/favicon.png">
<link rel="icon" type="image/png" href="https://d3js.org/favicon.png" sizes="400x400">
<meta property="og:type" content="article" />
<meta property="og:title" content="D3.js - Data-Driven Documents" />
<meta property="og:description" content="D3 is a JavaScript library for visualizing data with HTML, SVG, and CSS.">
<meta property="og:url" content="https://d3js.org/" />
<meta property="og:image" content="https://d3js.org/preview.png" />
<meta name="twitter:card" value="summary_large_image">
<meta name="twitter:site" value="@mbostock">
<meta name="twitter:creator" content="@mbostock">
<meta name="twitter:title" content="D3.js - Data-Driven Documents">
<meta name="twitter:description" content="D3 is a JavaScript library for visualizing data with HTML, SVG, and CSS.">
<meta name="twitter:url" content="https://d3js.org/">
<meta name="twitter:image" content="https://d3js.org/preview.png">
<meta name="twitter:image:width" content="560">
<meta name="twitter:image:height" content="295">
<meta name="author" content="Mike Bostock">
<link rel="canonical" href="https://d3js.org/">
<title>D3.js 公式ドキュメント日本語訳</title>
<style>
  html {
    font: 16px/1.5em "Helvetica Neue", Helvetica, sans-serif;
    min-width: 1040px;
    margin: 0;
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
  }

  body {
    margin: 1em 0 4em 0;
  }

  #examples {
    background: #ddd;
    height: 460px;
    overflow: hidden;
    padding: 0;
    position: relative;
    border-top: solid 1px #fff;
  }

  #examples:after,
  #examples:before {
    content: "";
    display: block;
    width: 100%;
    position: absolute;
    background: white;
    height: 16px;
    z-index: 2;
  }

  #examples:before {
    bottom: -16px;
    box-shadow: 0px -8px 16px rgba(0, 0, 0, .3);
  }

  #examples:after {
    top: -16px;
    box-shadow: 0px 8px 16px rgba(0, 0, 0, .3);
  }

  #examples-deep {
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    transform-style: preserve-3d;
    -webkit-backface-visibility: hidden;
    -moz-backface-visibility: hidden;
    backface-visibility: hidden;
  }

  #examples svg,
  #examples canvas {
    position: absolute;
  }

  .example-mesh {
    fill: none;
    stroke: #fff;
    stroke-width: 2px;
  }

  .example-anchor path {
    fill: none;
    pointer-events: all;
    cursor: pointer;
  }

  .example-anchor path:hover {
    stroke: #000;
    stroke-width: 2px;
  }

  h1 {
    color: #555;
    font-size: 64px;
    font-weight: 200;
    letter-spacing: -2px;
    white-space: nowrap;
    margin-top: 20px;
  }

  h1,
  h2 {
    text-rendering: optimizeLegibility;
  }

  h2 {
    margin-top: 2em;
  }

  h2 a {
    color: #ccc;
    left: -20px;
    position: absolute;
    width: 740px;
  }

  footer {
    font-size: small;
    margin-top: 8em;
  }

  header aside {
    margin-top: 82px;
  }

  header aside,
  footer aside {
    color: #636363;
    text-align: right;
  }

  aside {
    font-size: small;
    left: 780px;
    position: absolute;
    width: 180px;
  }

  .column {
    margin: auto;
    width: 720px;
    padding-right: 240px;
    position: relative;
  }

  a {
    color: steelblue;
  }

  a:not(:hover) {
    text-decoration: none;
  }

  pre,
  code {
    font-family: "Menlo", monospace;
    -webkit-text-size-adjust: 100%;
  }

  code {
    line-height: 1em;
  }

  pre {
    border-left: solid 2px #ccc;
    padding-left: 18px;
    margin: 2em 0 2em -20px;
  }

  aside ul {
    padding-left: 0;
    margin: 0;
  }

  .html .string,
  .javascript .string,
  .javascript .regexp {
    color: #756bb1;
  }

  .html .tag,
  .css .tag,
  .javascript .keyword {
    color: #3182bd;
  }

  .comment {
    color: #636363;
  }

  .html .doctype,
  .javascript .number {
    color: #31a354;
  }

  .html .attr,
  .css .attr,
  .javascript .class,
  .javascript .special {
    color: #e6550d;
  }
</style>

<div class="column">
  <header>
    <b><a href="./">Overview</a></b>
    <a style="margin-left:1em;" href="https://observablehq.com/@d3/gallery">サンプル</a>
    <a style="margin-left:1em;" href="https://github.com/d3/d3/wiki">wiki</a>
    <a style="margin-left:1em;" href="https://github.com/d3/d3/blob/main/API.md">API</a>
    <a style="margin-left:1em;" href="https://github.com/d3/d3">github</a>
  </header>

  <h1>
    <svg width="96" height="91" style="position:relative;top:22px;">
      <clipPath id="clip">
        <path
          d="M0,0h7.75a45.5,45.5 0 1 1 0,91h-7.75v-20h7.75a25.5,25.5 0 1 0 0,-51h-7.75zm36.2510,0h32a27.75,27.75 0 0 1 21.331,45.5a27.75,27.75 0 0 1 -21.331,45.5h-32a53.6895,53.6895 0 0 0 18.7464,-20h13.2526a7.75,7.75 0 1 0 0,-15.5h-7.75a53.6895,53.6895 0 0 0 0,-20h7.75a7.75,7.75 0 1 0 0,-15.5h-13.2526a53.6895,53.6895 0 0 0 -18.7464,-20z" />
      </clipPath>
      <linearGradient id="gradient-1" gradientUnits="userSpaceOnUse" x1="7" y1="64" x2="50" y2="107">
        <stop offset="0" stop-color="#f9a03c" />
        <stop offset="1" stop-color="#f7974e" />
      </linearGradient>
      <linearGradient id="gradient-2" gradientUnits="userSpaceOnUse" x1="2" y1="-2" x2="87" y2="84">
        <stop offset="0" stop-color="#f26d58" />
        <stop offset="1" stop-color="#f9a03c" />
      </linearGradient>
      <linearGradient id="gradient-3" gradientUnits="userSpaceOnUse" x1="45" y1="-10" x2="108" y2="53">
        <stop offset="0" stop-color="#b84e51" />
        <stop offset="1" stop-color="#f68e48" />
      </linearGradient>
      <g clip-path="url(#clip)">
        <path d="M-100,-102m-27,0v300h300z" fill="url(#gradient-1)" />
        <path d="M-100,-102m27,0h300v300z" fill="url(#gradient-3)" />
        <path d="M-100,-102l300,300" fill="none" stroke="url(#gradient-2)" stroke-width="40" />
      </g>
    </svg>
    d3.js official document (JA)
  </h1>
</div>

<div id="examples">
  <div id="examples-deep"></div>
</div>
<a href="https://observablehq.com/?utm_source=d3js-org&utm_medium=banner&utm_campaign=try-observable" style="
    padding: 20px 0;
    display: block;
    margin-bottom: 2em;
    color: black;
    line-height: inherit;
    background: linear-gradient(to bottom,#ffc,#ffa);
    border-bottom: solid 1px rgba(0,0,0,0.1);
">
  <div class="column" style="
      color: rgba(0,0,0,0.8);
  ">
    Like visualization and creative coding? Try interactive JavaScript notebooks in
    <span style="font-weight: bold;">
      Observable!
    </span>
  </div>
</a>


<script src="https://d3js.org/d3.v7.min.js" charset="utf-8"></script>
<script>

  /* https://github.com/d3/d3-plugins/tree/master/hexbin Copyright 2013 Michael Bostock. */
  !function () { d3.hexbin = function () { function u(n) { var r = {}; return n.forEach(function (n, t) { var a = s.call(u, n, t) / o, e = Math.round(a), c = h.call(u, n, t) / i - (1 & e ? .5 : 0), f = Math.round(c), l = a - e; if (3 * Math.abs(l) > 1) { var v = c - f, g = f + (f > c ? -1 : 1) / 2, m = e + (e > a ? -1 : 1), M = c - g, d = a - m; v * v + l * l > M * M + d * d && (f = g + (1 & e ? 1 : -1) / 2, e = m) } var j = f + "-" + e, p = r[j]; p ? p.push(n) : (p = r[j] = [n], p.i = f, p.j = e, p.x = (f + (1 & e ? .5 : 0)) * i, p.y = e * o) }), d3.values(r) } function a(r) { var t = 0, u = 0; return n.map(function (n) { var a = Math.sin(n) * r, e = -Math.cos(n) * r, i = a - t, o = e - u; return t = a, u = e, [i, o] }) } var e, i, o, c = 1, f = 1, h = r, s = t; return u.x = function (n) { return arguments.length ? (h = n, u) : h }, u.y = function (n) { return arguments.length ? (s = n, u) : s }, u.hexagon = function (n) { return arguments.length < 1 && (n = e), "m" + a(n).join("l") + "z" }, u.centers = function () { for (var n = [], r = 0, t = !1, u = 0; f + e > r; r += o, t = !t, ++u)for (var a = t ? i / 2 : 0, h = 0; c + i / 2 > a; a += i, ++h) { var s = [a, r]; s.i = h, s.j = u, n.push(s) } return n }, u.mesh = function () { var n = a(e).slice(0, 4).join("l"); return u.centers().map(function (r) { return "M" + r + "m" + n }).join("") }, u.size = function (n) { return arguments.length ? (c = +n[0], f = +n[1], u) : [c, f] }, u.radius = function (n) { return arguments.length ? (e = +n, i = 2 * e * Math.sin(Math.PI / 3), o = 1.5 * e, u) : e }, u.radius(1) }; var n = d3.range(0, 2 * Math.PI, Math.PI / 3), r = function (n) { return n[0] }, t = function (n) { return n[1] } }();

  var data = [
    { title: "Radial Tidy Tree", url: "https://observablehq.com/@d3/radial-tidy-tree" },
    { title: "Factorisation Diagrams", url: "https://www.jasondavies.com/factorisation-diagrams/" },
    { title: "Phylogenetic Tree of Life", url: "https://observablehq.com/@mbostock/tree-of-life" },
    { title: "Geographic Clipping", url: "https://www.jasondavies.com/maps/clip/" },
    { title: "Les Misérables Co-occurrence Matrix", url: "https://bost.ocks.org/mike/miserables/" },
    { title: "L*a*b* and HCL color spaces", url: "https://bl.ocks.org/mbostock/3014589" },
    { title: "Treemap", url: "https://observablehq.com/@d3/treemap" },
    { title: "Map Projection Transitions", url: "https://www.jasondavies.com/maps/transition/" },
    { title: "Across U.S. Companies, Tax Rates Vary Greatly", url: "http://www.nytimes.com/interactive/2013/05/25/sunday-review/corporate-taxes.html" },
    { title: "Rotating Voronoi", url: "https://observablehq.com/@mbostock/rotating-voronoi" },
    { title: "Zoomable Geography", url: "https://observablehq.com/@d3/zoom-to-bounding-box" },
    { title: "Fisheye Distortion", url: "https://bost.ocks.org/mike/fisheye/" },
    { title: "Geodesic Rainbow", url: "https://observablehq.com/@mbostock/geodesic-rainbow" },
    { title: "Hierarchical Bar Chart", url: "https://observablehq.com/@d3/hierarchical-bar-chart" },
    { title: "Exoplanets", url: "https://observablehq.com/@mbostock/exoplanets" },
    { title: "Crossfilter", url: "http://square.github.io/crossfilter/" },
    { title: "Alaska’s villages on the frontline of climate change", url: "http://www.guardian.co.uk/environment/interactive/2013/may/14/alaska-villages-frontline-global-warming" },
    { title: "The federal health-care exchange’s abysmal success rate", url: "http://www.washingtonpost.com/wp-srv/special/politics/state-vs-federal-exchanges/" },
    { title: "Counties Blue and Red, Moving Right and Left", url: "http://www.nytimes.com/interactive/2012/11/11/sunday-review/counties-moving.html" },
    { title: "At the National Conventions, the Words They Used", url: "http://www.nytimes.com/interactive/2012/09/06/us/politics/convention-word-counts.html" },
    { title: "Reprojected Raster Tiles", url: "https://www.jasondavies.com/maps/raster/" },
    { title: "Hive Plots", url: "https://bost.ocks.org/mike/hive/" },
    { title: "Donut Transitions", url: "https://bl.ocks.org/mbostock/4341417" },
    { title: "Non-Contiguous Cartogram", url: "https://observablehq.com/@d3/non-contiguous-cartogram" },
    { title: "Tadpoles", url: "https://observablehq.com/@mbostock/tadpoles" },
    { title: "Zoomable Circle Packing", url: "https://observablehq.com/@d3/zoomable-circle-packing" },
    { title: "Transform Transitions", url: "https://bl.ocks.org/mbostock/1345853" },
    { title: "Scatterplot Matrix", url: "https://observablehq.com/@d3/scatterplot-matrix" },
    { title: "Janet L. Yellen, on the Economy’s Twists and Turns", url: "http://www.nytimes.com/interactive/2013/10/09/us/yellen-fed-chart.html" },
    { title: "Front Row to Fashion Week", url: "http://www.nytimes.com/newsgraphics/2013/09/13/fashion-week-editors-picks/index.html" },
    { title: "Interrupted Sinu-Mollweide", url: "https://observablehq.com/@d3/interrupted-sinu-mollweide" },
    { title: "Streamgraph", url: "https://observablehq.com/@mbostock/streamgraph-transitions" },
    { title: "Force-Directed Graph", url: "https://observablehq.com/@d3/force-directed-graph" },
    { title: "Zoomable Icicle", url: "https://observablehq.com/@d3/zoomable-icicle" },
    { title: "Collision Detection", url: "https://bl.ocks.org/mbostock/3231298" },
    { title: "Waterman Butterfly", url: "https://observablehq.com/@d3/watermans-butterfly" },
    { title: "Airocean projection", url: "https://observablehq.com/@fil/airocean-projection" },
    { title: "Countries by Area", url: "https://www.jasondavies.com/maps/countries-by-area/" },
    { title: "Zoomable Sunburst", url: "https://observablehq.com/@d3/zoomable-sunburst" },
    { title: "Map Zooming", url: "https://bl.ocks.org/mbostock/6242308" },
    { title: "Fisher–Yates Shuffle", url: "https://bost.ocks.org/mike/shuffle/" },
    { title: "Sphere Spirals", url: "https://www.jasondavies.com/maps/sphere-spirals/" },
    { title: "World Tour", url: "https://observablehq.com/@mbostock/world-tour" },
    { title: "Zoomable Treemaps", url: "https://observablehq.com/@d3/zoomable-treemap" },
    { title: "Clipped Map Tiles", url: "https://observablehq.com/@d3/clipped-map-tiles" },
    { title: "Horizon Chart", url: "https://observablehq.com/@d3/horizon-chart" },
    { title: "Voronoi Labels", url: "https://observablehq.com/@mbostock/d3-voronoi-labels" },
    { title: "Hexbin Map", url: "https://observablehq.com/@d3/hexbin-map" },
    { title: "OMG Particles!", url: "https://bl.ocks.org/mbostock/1062544" },
    { title: "Calendar View", url: "https://observablehq.com/@d3/calendar-view" },
    { title: "The Wealth & Health of Nations", url: "https://observablehq.com/@mbostock/the-wealth-health-of-nations" },
    { title: "Collapsible Tree", url: "https://observablehq.com/@d3/collapsible-tree" },
    { title: "Hexagonal Binning", url: "https://observablehq.com/@d3/hexbin" },
    { title: "Over the Decades, How States Have Shifted", url: "http://www.nytimes.com/interactive/2012/10/15/us/politics/swing-history.html" },
    { title: "China Still Dominates, but Some Manufacturers Look Elsewhere", url: "http://www.nytimes.com/interactive/2013/04/08/business/global/asia-map.html" },
    { title: "Strikeouts on the Rise", url: "http://www.nytimes.com/interactive/2013/03/29/sports/baseball/Strikeouts-Are-Still-Soaring.html?ref=baseball" },
    { title: "Epicyclic Gearing", url: "https://observablehq.com/@mbostock/epicyclic-gearing" },
    { title: "Voronoi Particles", url: "https://observablehq.com/@mbostock/voronoi-particles" },
    { title: "The state of our union is … dumber", url: "http://www.guardian.co.uk/world/interactive/2013/feb/12/state-of-the-union-reading-level" },
    { title: "Chord Dependency Diagram", url: "https://observablehq.com/@d3/chord-dependency-diagram" },
    { title: "Floating Landmasses", url: "https://observablehq.com/@mbostock/floating-landmasses" },
    { title: "Parallel Coordinates", url: "https://observablehq.com/@d3/parallel-coordinates" },
    { title: "Prime Number Patterns", url: "https://www.jasondavies.com/primos/" },
    { title: "Owls to the Max", url: "https://observablehq.com/@mbostock/owls-to-the-max" },
    { title: "Constellations of Directors and Their Stars", url: "http://www.nytimes.com/newsgraphics/2013/09/07/director-star-chart/index.html" },
    { title: "Drought and Deluge in the Lower 48", url: "http://www.nytimes.com/interactive/2012/08/11/sunday-review/drought-history.html" },
    { title: "Animated Bézier Curves", url: "https://www.jasondavies.com/animated-bezier/" },
    { title: "Histogram", url: "https://observablehq.com/@d3/histogram" },
    { title: "Stacked-to-Grouped Bars", url: "https://observablehq.com/@d3/stacked-to-grouped-bars" },
    { title: "Force-Directed States of America", url: "https://bl.ocks.org/mbostock/1073373" },
    { title: "Faux-3D Arcs", url: "http://bl.ocks.org/dwtkns/4973620" },
    { title: "512 Paths to the White House", url: "http://www.nytimes.com/interactive/2012/11/02/us/politics/paths-to-the-white-house.html" },
    { title: "Polar Clock", url: "https://observablehq.com/@mbostock/polar-clock" },
    { title: "Population Pyramid", url: "https://observablehq.com/@mbostock/u-s-population-by-age-and-sex/3" },
    { title: "The America’s Cup Finale: Oracle’s Path to Victory", url: "http://www.nytimes.com/interactive/2013/09/25/sports/americas-cup-course.html" },
    { title: "Rainbow Worm", url: "https://observablehq.com/@mbostock/rainbow-worm" },
    { title: "Four Ways to Slice Obama’s 2013 Budget Proposal", url: "http://www.nytimes.com/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html" },
    { title: "Quadtree", url: "https://bl.ocks.org/mbostock/4343214" },
    { title: "Bubble Chart", url: "https://observablehq.com/@d3/bubble-chart" },
    { title: "Women as Academic Authors, 1665-2010", url: "http://chronicle.com/article/Woman-as-Academic-Authors/135192/" },
    { title: "Choropleth", url: "https://observablehq.com/@d3/choropleth" },
    { title: "Gilbert’s Two-World Perspective", url: "https://www.jasondavies.com/maps/gilbert/" },
    { title: "For Eli Manning, 150 Games and Counting", url: "http://www.nytimes.com/newsgraphics/2013/09/28/eli-manning-milestone/index.html" },
    { title: "Word Tree", url: "https://www.jasondavies.com/wordtree/" },
    { title: "Mobile Patent Suits", url: "https://observablehq.com/@mbostock/mobile-patent-suits" },
    { title: "Mitchell’s Best-Candidate", url: "https://observablehq.com/@mbostock/best-candidate-circles" },
    { title: "Sankey Diagrams", url: "https://observablehq.com/@d3/sankey-diagram" },
    { title: "van Wijk Smooth Zooming", url: "https://observablehq.com/@d3/smooth-zooming" },
    { title: "Bryce Harper: A swing of beauty", url: "http://www.washingtonpost.com/wp-srv/special/sports/bryce-harper-swing-of-beauty/" },
    { title: "Dissecting a Trailer: The Parts of the Film That Make the Cut", url: "http://www.nytimes.com/interactive/2013/02/19/movies/awardsseason/oscar-trailers.html" },
    { title: "Bar Chart Race, Explained", url: "https://observablehq.com/@d3/bar-chart-race-explained" },
    { title: "Hierarchical Edge Bundling", url: "https://observablehq.com/@d3/hierarchical-edge-bundling" },
    { title: "Geographic Bounding Boxes", url: "https://www.jasondavies.com/maps/bounds/" },
    { title: "Mona Lisa Histogram", url: "https://observablehq.com/@d3/mona-lisa-histogram" },
    { title: "Zoomable Map Tiles", url: "https://observablehq.com/@d3/zoomable-map-tiles" },
    { title: "D3 Show Reel", url: "https://bl.ocks.org/mbostock/1256572" },
    { title: "Building Hamiltonian Graphs from LCF Notation", url: "http://christophermanning.org/projects/building-cubic-hamiltonian-graphs-from-lcf-notation" },
    { title: "Sequences sunburst", url: "https://observablehq.com/@kerryrodden/sequences-sunburst" },
    { title: "Azimuth and Distance from London", url: "https://www.jasondavies.com/maps/azimuth-distance/" },
    { title: "Parallel Sets", url: "https://www.jasondavies.com/parallel-sets/" }
  ];

  data.forEach(function (d, i) {
    d.i = i % 10;
    d.j = i / 10 | 0;
  });

  d3.shuffler(d3.randomLcg(d3.utcHour()))(data);

  var height = 460,
    imageWidth = 132,
    imageHeight = 152,
    radius = 75,
    depth = 4;

  var currentFocus = [innerWidth / 2, height / 2],
    desiredFocus,
    idle = true;

  var style = document.body.style,
    transform = ("webkitTransform" in style ? "-webkit-"
      : "MozTransform" in style ? "-moz-"
        : "msTransform" in style ? "-ms-"
          : "OTransform" in style ? "-o-"
            : "") + "transform";

  var hexbin = d3.hexbin()
    .radius(radius);

  if (!("ontouchstart" in document)) d3.select("#examples")
    .on("mousemove", mousemoved);

  var deep = d3.select("#examples-deep");

  var canvas = deep.append("canvas")
    .attr("height", height);

  var context = canvas.node().getContext("2d");

  var svg = deep.append("svg")
    .attr("height", height);

  var mesh = svg.append("path")
    .attr("class", "example-mesh");

  var anchor = svg.append("g")
    .attr("class", "example-anchor")
    .selectAll("a");

  var graphic = deep.selectAll("svg,canvas");

  var image = new Image;
  image.src = "ex.jpg?ddcbcae235e360c7d01311163440cb88";
  image.onload = resized;

  d3.select(window)
    .on("resize", resized)
    .each(resized);

  function drawImage(d) {
    context.save();
    context.beginPath();
    context.moveTo(0, -radius);

    for (var i = 1; i < 6; ++i) {
      var angle = i * Math.PI / 3,
        x = Math.sin(angle) * radius,
        y = -Math.cos(angle) * radius;
      context.lineTo(x, y);
    }

    context.clip();
    context.drawImage(image,
      imageWidth * d.i, imageHeight * d.j,
      imageWidth, imageHeight,
      -imageWidth / 2, -imageHeight / 2,
      imageWidth, imageHeight);
    context.restore();
  }

  function resized() {
    var deepWidth = innerWidth * (depth + 1) / depth,
      deepHeight = height * (depth + 1) / depth,
      centers = hexbin.size([deepWidth, deepHeight]).centers();

    desiredFocus = [innerWidth / 2, height / 2];
    moved();

    graphic
      .style("left", Math.round((innerWidth - deepWidth) / 2) + "px")
      .style("top", Math.round((height - deepHeight) / 2) + "px")
      .attr("width", deepWidth)
      .attr("height", deepHeight);

    centers.forEach(function (center, i) {
      center.j = Math.round(center[1] / (radius * 1.5));
      center.i = Math.round((center[0] - (center.j & 1) * radius * Math.sin(Math.PI / 3)) / (radius * 2 * Math.sin(Math.PI / 3)));
      context.save();
      context.translate(Math.round(center[0]), Math.round(center[1]));
      drawImage(center.example = data[(center.i % 10) + ((center.j + (center.i / 10 & 1) * 5) % 10) * 10]);
      context.restore();
    });

    mesh.attr("d", hexbin.mesh);

    anchor = anchor.data(centers, function (d) { return d.i + "," + d.j; });

    anchor.exit().remove();

    var anchorEnter = anchor.enter().append("a")
      .attr("xlink:href", function (d) { return d.example.url; })
      .attr("xlink:title", function (d) { return d.example.title; });

    anchorEnter.append("path")
      .attr("d", hexbin.hexagon());

    anchor = anchorEnter.merge(anchor)
      .attr("transform", function (d) { return "translate(" + d + ")"; });
  }

  function mousemoved(event) {
    var m = d3.pointer(event);

    desiredFocus = [
      Math.round((m[0] - innerWidth / 2) / depth) * depth + innerWidth / 2,
      Math.round((m[1] - height / 2) / depth) * depth + height / 2
    ];

    moved();
  }

  function moved() {
    var t = d3.timer(function () {
      if (Math.abs(desiredFocus[0] - currentFocus[0]) < .5 && Math.abs(desiredFocus[1] - currentFocus[1]) < .5) currentFocus = desiredFocus, t.stop();
      else currentFocus[0] += (desiredFocus[0] - currentFocus[0]) * .14, currentFocus[1] += (desiredFocus[1] - currentFocus[1]) * .14;
      deep.style(transform, "translate(" + (innerWidth / 2 - currentFocus[0]) / depth + "px," + (height / 2 - currentFocus[1]) / depth + "px)");
    });
  }

</script>

<div class="column">

  <aside>
    <ul>
      <li style="list-style-image: url('icon-observable.svg');">
        <a href="https://observablehq.com/@d3/gallery" title="D3 Gallery">
          See more examples
        </a>
      </li>
      <li style="list-style-image: url('icon-slack.svg');">
        <a href="https://d3-slackin.herokuapp.com/" title="D3 Slack">
          Chat with the community
        </a>
      </li>
      <li style="list-style-image: url('icon-twitter.svg');">
        <a href="https://twitter.com/d3js_org" title="D3 Twitter">
          Follow announcements
        </a>
      </li>
      <li style="list-style-image: url('icon-github.svg');">
        <a href="https://github.com/d3/d3" title="D3 GitHub">
          Report a bug
        </a>
      </li>
      <li style="list-style-image: url('icon-stackoverflow.svg');">
        <a href="https://stackoverflow.com/questions/tagged/d3.js" title="D3 Stack Overflow">
          Ask for help
        </a>
      </li>
    </ul>
  </aside>

  <h2><a name="selections" href="#selections">#</a>注意：本ウェブサイトについて</h2>
  <p>
    本ウェブサイトはD3.jsの公式ドキュメント「D3.js-Data-Driven Documents」の日本語訳サイトです。
    もしあなたが本ウェブサイトの日本語訳のミスに気づいた場合、または更なる改善の余地があると気づいた場合、
    お手数ですが<a href="https://github.com/kawadasatoshi/d3js_ja_documents">こちらのリンクから</a>
    issueを出してください。
  </p>



  <h2><a name="selections" href="#selections">#</a>D3.jsとは何か?</h2>
  <p>
    D3.jsは、データに基づいてドキュメントを操作するためのJavaScriptライブラリです。
    D3.jsは、HTML、SVG、およびCSSを使用してデータに命を吹き込むのに役立ちます。
    D3.jsはWeb標準に重点を置いているため、強力な視覚化コンポーネントとDOM操作へのデータ駆動型アプローチを組み合わせることで、
    独自のフレームワークに縛られることなく、最新のブラウザの全機能を利用できます。
  </p>

  <p>最新バージョンである7.11は <span id="version"></span> こちら:

  <ul>
    <li><a id="download" href="https://github.com/d3/d3/releases/latest">d3.tgz</a>
  </ul>

  <script>

    d3.select("#download").attr("href", "https://registry.npmjs.org/d3/-/d3-" + d3.version + ".tgz").text("d3-" + d3.version + ".tgz");
    d3.select("#version").text(" (" + d3.version + ")");

  </script>

  <p>リンクを埋め込んで利用する場合は次のコードをコピー&ペーストしてください。

  <pre><code class="html">&lt;script src="https://d3js.org/d3.v7.min.js">&lt;/script></code></pre>

  <p> <a href="https://github.com/d3/d3">ソースコードとテスト</a> はこちらのgithubから <a
      href="https://github.com/d3/d3/zipball/main">ダウンロードしてください</a>。

  <h2><a name="introduction" href="#introduction">#</a>導入編</h2>

  <aside>Read <a href="https://observablehq.com/@d3/learn-d3">more tutorials</a>.</aside>

  <p>
    D3.jsを使用すると、任意のデータをドキュメントオブジェクトモデル（DOM）にバインドしてから、データ駆動型の変換をドキュメントに適用できます。
    たとえば、D3.jsを使用して数値の配列からHTMLテーブルを生成できます。
    それだけでなく棒グラフを作ることもできます。
  </p>

  <p>
    D3は、考えられるすべての機能を提供しようとするモノリシックフレームワークではありません。
    代わりに、D3は問題の核心であるデータに基づくDOMオブジェクトの効率的な操作を解決します。
    これにより独自の表現が回避することができ、HTML、SVG、CSSなどのWeb標準の全機能を利用できます。
    最小限のオーバーヘッドで、D3は非常に高速で、インタラクションとアニメーションの大規模なデータセットと動的な動作をサポートします。
    D3の機能スタイルにより、公式およびコミュニティで開発されたモジュールの多様なコレクションを通じてコードを再利用できます。
  </p>
  <h2><a name="selections" href="#selections">#</a>Selections</h2>

  <aside>Read <a href="https://github.com/d3/d3-selection">more about selections</a>.</aside>

  <p>
    W3C DOM APIを使用してDOMを変更するのは面倒です。メソッド名は冗長であり、命令型のアプローチでは、手動でのforとDOMの修正が必要です。
    たとえば、段落要素のテキストの色を変更するには、次のようにします。
  </p>

  <pre><code>var paragraphs = document.getElementsByTagName("p");
for (var i = 0; i &lt; paragraphs.length; i++) {
  var paragraph = paragraphs.item(i);
  paragraph.style.setProperty("color", "blue", null);
}</code></pre>

  <p>D3は宣言型アプローチを採用しており、selectAllと呼ばれるノードの任意のセットを操作します。
    たとえば、あなたは上記のループを次のように書き換えることができます。
  <pre><code>d3.selectAll("p").style("color", "blue");</code></pre>
  </p>

  <p>また、あなたは必要に応じて個々のノードの操作が可能です。

  <pre><code>d3.select("body").style("background-color", "black");</code></pre>

  <p>要素の指定は<a href = "https://www.w3.org/TR/selectors-api/">W3CセレクターAPI</a>によって定義されサポートされています。
    要素は、包含、属性値、クラスとIDによって指定することができます。
    上記の例だとタグ名(<code>"p"</code> and <code>"body"</code>,)が該当します。
  </p>
    

  <p>
    D3は、ノードを変更するための多数のメソッドを提供します。
    属性またはスタイルの設定。イベントリスナーの登録。ノードの追加、削除、または並べ替え。 
    HTMLまたはテキストコンテンツを変更することができます。
    これらは、大多数のニーズに対して十分な機能を満たしていると思われます。
    各D3のセレクターは単にノードの配列であるため、基盤となるDOMに直接アクセスすることもできます。
  </p>

  <h2><a name="properties" href="#properties">#</a>Dynamic Properties</h2>

  <p><a href="https://jquery.com/">jQuery</a>などの他のDOMフレームワークに精通している読者は、D3との類似点をすぐに認識することができるでしょう。
    ただし、スタイル、属性、およびその他のプロパティは、単純な定数だけでなく<i>関数型データ</i>として指定できます。

    これらの単純で明確な機能にも関わらず、これは驚くべきほどに強力です。

    例えば、<a href="https://github.com/d3/d3-geo/blob/main/README.md#geoPath">d3.geoPath</a> 関数は
    この <a href="https://tools.ietf.org/html/rfc7946">geographic coordinates</a> プロジェクトにおいて、
    地理的な情報を<a　href="https://www.w3.org/TR/SVG/paths.html#PathData">SVGデータ</a>.に変換することができました。
    
    D3.jsは、エリアチャート、ラインチャート、<a href="https://github.com/d3/d3-shape">円グラフの表現など</a>、多くの組み込みの再利用可能な関数と関数ファクトリを提供します。

  <p>たとえば、段落にランダムに色を付けるには、次のようにします。

  <pre><code>d3.selectAll("p").style("color", function() {
  return "hsl(" + Math.random() * 360 + ",100%,50%)";
});</code></pre>

  <p>偶数ノードと奇数ノードのグレーの色合いを交互にするには

  <pre><code>d3.selectAll("p").style("color", function(d, i) {
  return i % 2 ? "#fff" : "#eee";
});</code></pre>

  <p>
    計算されたプロパティは、多くの場合、バインドされたデータを参照します。
    データは値の配列として指定され、各値は次のように渡されます。
    最初の引数 (<code>d</code>)は関数に渡すデータの指定です。 
    デフォルトのインデックスによる結合では、データ配列の最初の要素が選択範囲の最初のノードに渡され、2番目の要素から関数の引数として機能します。
    たとえば、数値の配列を段落要素にバインドする場合、これらの数値を使用して動的にフォントサイズを指定できます。
  </p>

  <pre><code>d3.selectAll("p")
  .data([4, 8, 15, 16, 23, 42])
    .style("font-size", function(d) { return d + "px"; });</code></pre>

  <p>一度データがドキュメントに結びついて仕舞えば、 あなたは <code>data</code> を指定することを省くことができます。
    D3は以前にバインドされたデータを取得します。
  </p>


  <h2><a name="enter-exit" href="#enter-exit">#</a>Enter and Exit</h2>

  <aside>Read <a href="https://bost.ocks.org/mike/join/">more about data joins</a>.</aside>

  <p>D3の入力と終了の選択を使用して、受信データ用の新しいノードを作成し、不要になった送信ノードを削除できます。

  <p>
データがバインドされると、データ配列の各要素が選択範囲の対応するノードとペアになります。
データよりノードが少ない場合、追加のデータ要素が入力選択を形成します。
これは、入力選択に追加することでインスタンス化できます。例えば：
</p>

  <pre><code>d3.select("body")
  .selectAll("p")
  .data([4, 8, 15, 16, 23, 42])
  .enter().append("p")
    .text(function(d) { return "I’m number " + d + "!"; });</code></pre>

  <p>
    ノードの更新がデフォルトの選択であり、データ演算子の結果です。
    したがって、追加と削除の選択を忘れた場合、対応するデータが存在する要素のみが自動的に選択されます。
    一般的なパターンは、最初の選択を次の3つの部分に分割することです。変更する更新ノード、追加する入力ノード、および削除する終了ノードです。
  </p>

  <pre><code>// Update…
var p = d3.select("body")
  .selectAll("p")
  .data([4, 8, 15, 16, 23, 42])
    .text(function(d) { return d; });

// Enter…
p.enter().append("p")
    .text(function(d) { return d; });

// Exit…
p.exit().remove();
</code></pre>

  <p>これらの3つのケースを個別に処理することにより、どの操作をどのノードで実行するかを正確に指定します。これは
    パフォーマンスを向上させ、遷移をより細かく制御できます。
    たとえば、棒グラフを使用すると、入力を初期化できます古いスケールを使用してバーを作成し、
    更新と終了とともに、入力バーを新しいスケールに移行します
  </p>

  <p>D3を使用すると、データに基づいてドキュメントを変換できます。これには、要素の作成と破棄の両方が含まれます。 D3はあなたを可能にします
    ユーザーの操作、時間の経過に伴うアニメーション、さらには非同期に応じて既存のドキュメントを変更する
    サードパーティからの通知。ドキュメントが最初にレンダリングされるハイブリッドアプローチも可能です。
    サーバー、およびD3を介してクライアントで更新されます。

  <h2><a name="transformation" href="#transformation">#</a>新しい表現ではなく手法の移り変わり</h2>

  <p>
    D3は新しい視覚的表現を導入していません。 
    ProcessingやProtovisとは異なり、D3のグラフィックマークの言葉は、HTML、SVG、CSSなどのWeb標準から直接取得されます。
    たとえば、D3を使用してSVG要素を作成し、外部スタイルシートでスタイルを設定できます。
    複合フィルター効果、破線のストローク、およびクリッピングを使用できます。
    ブラウザベンダーが明日新機能を導入した場合、すぐに使用できるようになります。
    ツールキットの更新は必要ありません。
    また、将来D3以外のツールキットを使用することにした場合は、標準に関する知識を身に付けることができます。
  </p>

  <p>
    何よりも、D3は、ブラウザの組み込み要素インスペクタ、つまり操作するノードを使用して簡単にデバッグできます。
    D3は、ブラウザがネイティブに理解するものとまったく同じです。
  </p>

  <h2><a name="transitions" href="#transitions">#</a>Transitions</h2>

  <p>
    D3の変換への焦点は、アニメーション化されたトランジションに自然に広がります。
    トランジションは、時間の経過とともにスタイルと属性を徐々に補間します。
    トゥイーンは、「エラスティック」、「キュービックインアウト」、「リニア」などのイージング機能を介して制御できます。
    D3の補間器は、数値や文字列に埋め込まれた数値（フォントサイズ、パスデータなど）などのプリミティブと複合値の両方をサポートします。 
    D3の補間レジストリを拡張して、複雑なプロパティとデータ構造をサポートすることもできます。
  </p>

  <p>たとえば、ページの背景を黒にフェードするには、次のようにします。

  <pre><code>d3.select("body").transition()
    .style("background-color", "black");</code></pre>

  <p>または、シンボルマップの円のサイズを変更するには：

  <pre><code>d3.selectAll("circle").transition()
    .duration(750)
    .delay(function(d, i) { return i * 10; })
    .attr("r", function(d) { return Math.sqrt(d * scale); });</code></pre>

  <p>
    D3は、実際に変更される属性のみを変更することにより、オーバーヘッドを削減し、グラフィカルな複雑さを軽減します。
    それも高フレームレートで。 
    D3では、イベントを介した複雑な遷移のシーケンスも可能です。
    そして、あなたはまだCSS3を使うことができます。
    3はブラウザのツールボックスを置き換えるものではありませんが、使いやすい方法でリリースしています。

  <p>Want to learn more? Read <a href="https://observablehq.com/@d3/learn-d3">these tutorials</a>.

  <footer>
    Library released under <a href="https://opensource.org/licenses/BSD-3-Clause">BSD license</a>. Copyright 2021 <a
      href="https://bost.ocks.org/mike/" rel="author">Mike Bostock</a>.
  </footer>

</div>

<a href="https://github.com/d3/d3"><img style="position:fixed;top:0;right:0;border:0;z-index:2;" width="149"
    height="149" src="https://d3js.org/forkme.png" alt="Fork me on GitHub"></a>

<script src="highlight.v9.min.js"></script>
<script>

  GoogleAnalyticsObject = "ga", ga = function () { ga.q.push(arguments); }, ga.q = [], ga.l = +new Date;
  ga("create", "UA-48272912-2", "d3js.org");
  ga("send", "pageview");

  hljs.configure({ classPrefix: "" });
  d3.selectAll("code:not([class])").classed("javascript", 1);
  d3.selectAll("code").each(function () { hljs.highlightBlock(this); });

</script>
<script async src="//www.google-analytics.com/analytics.js"></script>